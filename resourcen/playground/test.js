#!/usr/bin/env node
// 


//
let bytes
// scene name
bytes = [0xF0, 0x00, 0x00, 0x74, 0x00, 0x0E, 0x00, 0x42, 0x60, 0x69, 0x46, 0x40, 0x60, 0x20, 0x00, 0x00, 0x20, 0x00, 0x00, 0x20, 0x00, 0x20, 0x00, 0x00, 0x20, 0x00, 0x00, 0x20, 0x20, 0x00, 0x00, 0x00, 0x20, 0x20, 0x00, 0x00, 0x20, 0x00, 0x00, 0xF0, 0x00, 0x01, 0x60, 0x00, 0x00, 0xF7]
console.log('SCENE: ' + bytes.map(item => String.fromCharCode(item)).join(''))
// patch name
bytes = [0xF0, 0x00, 0x01, 0x60, 0x11, 0x08, 0x04, 0x00, 0x00, 0x6F, 0x60, 0x00, 0x42, 0x4E, 0x4E, 0x73, 0x74, 0x00, 0x20, 0x00, 0x00, 0x20, 0x00, 0x20, 0x00, 0x00, 0x20, 0x00, 0x20, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00]

const easymidi = require('easymidi')
const API = require('./src/api')(new easymidi.Output('USB MIDI Interface'))
///console.log(parseText(bytes))


console.log(API._PARSER_.QUERY_SCENE_NAME([0xF0, 0x00, 0x00, 0x74, 0x00, 0x10, 0xE0, 0x00, 0x00, 0xE0, 0x60, 0x11, 0xF0, 0x00, 0x01, 0x60, 0x11, 0x00, 0xE0, 0x00, 0x00, 0xE0, 0x60, 0x00, 0x00, 0xF7]))
// console.log(new TextDecoder().decode(new Uint8Array(bytes)))
if (true)
    return

// F0 00 01 60 00 11 00 00 3F
const handlers = require('./src/handlers')
const F = require('./src/FractalMIDI')
// const state = handlers[F.FUNCTION.TUNER_STATE]([0xF0, 0x00, 0x01, 0x60, 0x00, 0x11, 0x00, 0x00, 0x3F])
// console.log(`state`, state)

const statusDump = handlers[F.FUNCTION.STATUS_DUMP]([0xF0, 0x00, 0x00, 0x74, 0x11, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x42, 0x00, 0x00, 0x46, 0x00, 0x00, 0x0C, 0x00, 0x41, 0x04, 0x00, 0x00, 0x10, 0x00, 0x00, 0x1C, 0x00, 0x41, 0x40, 0x00, 0x00, 0x64, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x74, 0x00, 0x00, 0xF7])
console.log(`statusDump`, statusDump)

// status dump?
// 0xF0,  0x00,  0x01,  0x74,  0x00,  0x02,  0x25,  0x00,  0x00,  0x2A,  0x00,  0x40,  0x30,  0x00,  0x40,  0x3C,  0x00,  0x42,  0x00,  0x00,  0x00,  0x46,  0x00,  0x00,  0x0C,  0x00,  0x41,  0x56,  0x00,  0x00,  0x10,  0x00,  0x00,  0x1C,  0x00,  0x41,  0x40,  0x00,  0x41,  0x64,  0x00,  0x00,  0xF0,  0x00,  0x01,  0x60,  0x11,  0x00,  0xF0,  0x00,  0x01,  0x60,  0x00,  0x10,  0xF7